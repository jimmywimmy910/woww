-- Variables
local player = game.Players.LocalPlayer
local mouse = player:GetMouse()
local noclipActivated = false

-- UI Setup
local gui = Instance.new("ScreenGui")
gui.Name = "NoclipScriptGUI"
gui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
gui.Parent = player.PlayerGui

-- Styling Constants
local backgroundColor = Color3.fromRGB(25, 25, 30)
local frameColor = Color3.fromRGB(80, 0, 120)
local buttonColor = Color3.fromRGB(100, 0, 160)
local textColor = Color3.fromRGB(255, 255, 255)

local frameSize = UDim2.new(0, 180, 0, 180)
local buttonSize = UDim2.new(0, 160, 0, 40)
local buttonOffset = UDim2.new(0.5, -80, 0, 120)
local creditTextSize = UDim2.new(0, 160, 0, 20)
local creditTextPosition = UDim2.new(0, 0, 0, 160)

-- Frame Creation
local frame = Instance.new("Frame")
frame.Size = frameSize
frame.Position = UDim2.new(0, 20, 0, 20)
frame.BackgroundColor3 = backgroundColor
frame.BorderSizePixel = 2
frame.BorderColor3 = textColor
frame.Active = true -- Make frame draggable
frame.Draggable = true
frame.Parent = gui

-- Title
local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, 0, 0, 30)
title.Position = UDim2.new(0, 0, 0, 0)
title.Text = "Noclip Script"
title.TextColor3 = textColor
title.Font = Enum.Font.FredokaOne
title.TextSize = 18
title.BackgroundTransparency = 1
title.Parent = frame

-- Noclip Button
local noclipButton = Instance.new("TextButton")
noclipButton.Size = buttonSize
noclipButton.Position = buttonOffset
noclipButton.AnchorPoint = Vector2.new(0.5, 0)
noclipButton.Text = "Toggle Noclip"
noclipButton.TextColor3 = textColor
noclipButton.Font = Enum.Font.FredokaOne
noclipButton.TextSize = 16
noclipButton.BackgroundColor3 = buttonColor
noclipButton.BorderSizePixel = 0
noclipButton.Parent = frame

-- Credit Text
local creditText = Instance.new("TextLabel")
creditText.Size = creditTextSize
creditText.Position = creditTextPosition
creditText.Text = "Jimmy made this"
creditText.TextColor3 = textColor
creditText.Font = Enum.Font.FredokaOne
creditText.TextSize = 12
creditText.BackgroundTransparency = 1
creditText.TextXAlignment = Enum.TextXAlignment.Center
creditText.Parent = frame

-- Functionality
noclipButton.MouseButton1Click:Connect(function()
    noclipActivated = not noclipActivated
    if noclipActivated then
        noclipButton.Text = "Noclip On"
        startNoclip()
    else
        noclipButton.Text = "Toggle Noclip"
        stopNoclip()
    end
end)

local function startNoclip()
    player.CharacterAdded:Connect(function(character)
        local humanoid = character:WaitForChild("Humanoid")
        local rootPart = character:WaitForChild("HumanoidRootPart")
        
        humanoid.Died:Connect(function()
            stopNoclip()
        end)

        local function updateNoclip()
            while noclipActivated and humanoid and rootPart and character.Parent == game.Players do
                humanoid.PlatformStand = true
                humanoid:Move(Vector3.new())
                rootPart.CFrame = mouse.Hit + Vector3.new(0, 3, 0)
                wait()
            end
        end

        updateNoclip()
    end)
end

local function stopNoclip()
    local character = player.Character
    if character then
        local humanoid = character:FindFirstChildOfClass("Humanoid")
        if humanoid then
            humanoid.PlatformStand = false
        end
    end
end
